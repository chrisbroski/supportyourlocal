<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ajax HTTP Tool</title>
<link rel="icon" type="image/png" href="data:image/png;base64,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">

<style type="text/css">
* {margin: 0; padding: 0; box-sizing: border-box; }

html {padding: 5px 0 0 5px; font-family: sans-serif; }
h1 {padding: 0 0 5px 5px; font-size: 28px; color:#999; font-style: italic; }
h2 {padding: 5px 0; font-size: 20px; color: #666; }
h3 {margin: 0 0 5px 0; font-size: 16px; }

#uri {
    padding: 5px;
    overflow: auto;
}
#uri label {
    display: block;
    width: 40px;
    float: left;
    line-height: 30px;
}
#uri > div {overflow: auto; }
#uri input {
    padding: 4px;
    display: block;
    font-size: 15px;
    width: 100%;
    font-family: monospace;
}

#httpReq, #httpRsp {
    margin: 0 5px 5px 0; padding: 0 5px 5px 5px;
    border: 1px solid #ccc;
    overflow: auto;
}

#httpReq {width: 286px; float: left; }
#httpReq input {width: 280px; margin: 0 0 5px 0; }
#httpReq input[type="checkbox"] {width: auto; margin: 0 0 5px 0; }
#httpReq label {font-size: 12px; }
#httpReq table {border-collapse: collapse; margin: 5px 0; }
#httpReq td {padding: 0 2px 2px 0; }
#httpReq table input {width: 137px; margin:0; }
#httpReq button, #httpReq select {margin: 5px 0 5px 5px; }
#httpReq button {padding: .4em; }
#httpReq textarea {width: 272px; }
#httpReq fieldset {border: 0 none; }
#httpReq fieldset label {
    margin: 0 0 5px 0;
    font-weight: bold;
    width: 137px;
    float: left;
    display: block;
}
#httpReq fieldset input {width: 135px; float: left; margin: 0 2px 2px 0; }

#httpRsp pre {
    margin: 0 0 10px 0; padding: 10px;
    background: #eee;
    border: 1px solid #666;
    overflow: auto;
}
</style>

<body>
<h1>Ajax HTTP Tool</h1>

<form onsubmit="return sendReq(); ">

<section id="uri">
    <label>URI:</label>
    <div><input id="httpReqResource"></div>
</section>

<section id="httpReq">

<h2>Request</h2>

<h3>Method
<select id="httpReqMethod" onchange="entityEnable(this)">
<option value="GET">GET
<option value="POST">POST
<option value="PUT">PUT
<option value="DELETE">DELETE
<option value="OPTIONS">OPTIONS
<option value="HEAD">HEAD
<option value="TRACE">TRACE
<option value="CONNECT">CONNECT
</select>
</h3>

<fieldset>
<label>Request Header</label>
<label>Value</label>
<div id="reqHead"></div>
</fieldset>

<h3>Entity Body</h3>
<textarea id="httpReqEntity" cols="30" rows="3" disabled="disabled"></textarea>

<button>Send Request</button>

<datalist id="req-headers">
<option value="Accept">
<option value="Authorization">
<option value="Content-Type">
<option value="Cache-Control">
<option value="Origin">
<option value="Range">
</datalist>

<datalist id="accept-values">
<option value="text/html">
<option value="text/plain">
<option value="application/json">
</datalist>

<datalist id="content-type-values">
<option value="application/x-www-form-urlencoded">
<option value="application.json">
</datalist>

</section>

</form>

<div id="httpRsp">
<h2>Response</h2>
<h3>Status: <span id="httpRspStatus"></span></h3>

<h3>Headers</h3>
<pre id="httpRspHeader"></pre>

<h3>Entity Body</h3>
<pre id="httpRspEntity"></pre>
</div>

<script>
var xhr = new XMLHttpRequest(),
    reqMax = 4;

function $(selector) {
    return document.querySelector(selector);
}

function lineBreak(rawHtml) {
    // Normalizes Windows/Unix line endings
    rawHtml = rawHtml.replace(/\r\n/g, "\n");
    return rawHtml.replace(/\r/g, "\n");
}

function entityAllowed(method) {
    return (method === "POST" || method === "OPTIONS" || method === "PUT");
}

function entityEnable(methodSelect) {
    $("#httpReqEntity").disabled = !entityAllowed(methodSelect.value);
}

function getReqData() {
    var reqData = {"method": "", "resource": "", "hdr": {}, "entity": ""}, ii;
    reqData.method = $("#httpReqMethod").value;
    reqData.resource = $("#httpReqResource").value;

    for (ii = 0; ii < reqMax; ii = ii + 1) {
        if ($("#httpReqHeader" + ii).value) {
            reqData.hdr[$("#httpReqHeader" + ii).value] = $("#httpReqValue" + ii).value;
        }
    }
    return reqData;
}

function hasContentType(hdr) {
    return hdr.toUpperCase() === "CONTENT-TYPE";
}

function sendReq() {
    var reqData = getReqData();

    xhr.open(reqData.method, reqData.resource, true);

    if (entityAllowed(reqData.method)) {
        reqData.entity = $("#httpReqEntity").value;
        if (!Object.keys(reqData.hdr).some(hasContentType)) {
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
        }
    }

    Object.keys(reqData.hdr).forEach(function (hdr) {
        xhr.setRequestHeader(hdr, reqData.hdr[hdr]);
    });

    xhr.onload = function () {
        $("#httpRspStatus").textContent = xhr.status + " " + xhr.statusText;
        $("#httpRspHeader").textContent = lineBreak(xhr.getAllResponseHeaders());

        if (xhr.getResponseHeader("Content-Type") === "application/json") {
            $("#httpRspEntity").textContent = JSON.stringify(JSON.parse(xhr.responseText), null, "    ");
        } else {
            $("#httpRspEntity").textContent = xhr.responseText;
        }
    };

    xhr.send(reqData.entity);
    return false;
}

function getDataList() {
    this.removeAttribute("list");

    if (this.previousSibling.value === "Accept") {
        this.setAttribute("list", "accept-values");
    }
    if (this.previousSibling.value === "Content-Type") {
        this.setAttribute("list", "content-type-values");
    }
}

function init() {
    var ii, reqInput;
    for (ii = 0; ii < reqMax; ii = ii + 1) {
        reqInput = document.createElement("input");
        reqInput.id = "httpReqHeader" + ii;
        reqInput.setAttribute("list", "req-headers");
        $("#reqHead").appendChild(reqInput);

        reqInput = document.createElement("input");
        reqInput.id = "httpReqValue" + ii;
        reqInput.onfocus = getDataList;
        $("#reqHead").appendChild(reqInput);
    }
}

init();

</script>
